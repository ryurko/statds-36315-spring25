{
  "hash": "7c45726ea7832f92b7b4e9b1d75a860e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Animations, infographics, and annotations\"\nauthor: \"Prof Ron Yurko\"\nfooter:  \"[statds-36315-spring25](https://ryurko.github.io/statds-36315-spring25/)\"\ndate: 2025-04-02\nengine: knitr\nformat:\n  revealjs:\n    theme: theme.scss\n    chalkboard: true\n    pdf-separate-fragments: true\n    slide-number: c/t\n    smaller: true\n    code-line-numbers: true\n    linestretch: 1.25\n    html-math-method:\n      method: mathjax\n      url: \"https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js\"\n---\n\n\n\n\n\n\n## Announcements, previously, and today...\n\n::: {style=\"font-size: 85%;\"}\n\n**HW7 is due TONIGHT March April 2nd by 11:59 PM ET**\n\n**You do NOT have lab this week - CARNIVAL!**\n\n:::\n\n. . .\n\n::: {style=\"font-size: 85%;\"}\n\n**Last time:**\n\n+ Fundamental characteristic of time series data: measurements are dependent over time\n\n+ Plotting moving averages is the most common way to visualize time series data\n\n+ The things to look out for in time series data are: (1) Average trends, (2) Seasonality, (3) Noise\n\n**TODAY:** Animations, infographics, and annotations\n\n:::\n\n---\n\n## Storytelling with animation...\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nf1_data_ex |>\n  ggplot(aes(x = round, y = points, group = name, color = name)) +\n  geom_line(size = 2) +\n  scale_x_continuous(breaks = seq(1, 17, 1)) +\n  labs(title = \"The race for third place in the 2020 F1 season\",\n       y = \"Accumulated points\", x = NULL) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](20-anim-graphics_files/figure-revealjs/unnamed-chunk-3-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n\n\n\n---\n\n## Use [`gganimate`](https://gganimate.com/) to add animations\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"1,9\"}\nlibrary(gganimate)\nf1_data_ex |>\n  ggplot(aes(x = round, y = points, group = name, color = name)) +\n  geom_line(size = 2) +\n  scale_x_continuous(breaks = seq(1, 17, 1)) +\n  labs(title = \"The race for third place in the 2020 F1 season\",\n       y = \"Accumulated points\", x = NULL) +\n  theme_bw() +\n  transition_reveal(round)\n```\n\n::: {.cell-output-display}\n![](20-anim-graphics_files/figure-revealjs/f1-anim-1.gif){fig-align='center'}\n:::\n:::\n\n\n\n\n\n---\n\n## Using animation to add a dimension\n\n\n\n\n::: {.cell layout-align=\"center\" output-location='slide'}\n\n```{.r .cell-code}\ntxhousing |> \n  group_by(city, year) |> \n  summarize(median = mean(median, na.rm = TRUE),listings = mean(listings, na.rm = TRUE)) |> \n  ggplot(aes(x = median, y = listings, color = (city == \"Houston\"), \n             size = (city == \"Houston\"))) +\n  geom_point(alpha = 0.5, show.legend = FALSE) +\n  scale_color_manual(values = c(\"black\", \"darkred\")) +\n  scale_size_manual(values = c(2, 4)) +\n  scale_x_continuous(labels = scales::dollar, name = \"Median Price\") +\n  scale_y_continuous(labels = scales::label_number(scale_cut = scales::cut_short_scale())) +\n  theme_bw() +\n  labs(x = \"Median Price\", y = \"Avg. of Monthly Listings\",\n       subtitle = \"Houston in red\")\n```\n\n::: {.cell-output-display}\n![](20-anim-graphics_files/figure-revealjs/housing-static-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n\n\n\n---\n\n## Using animation to add a dimension\n\n\n\n\n::: {.cell layout-align=\"center\" output-location='slide'}\n\n```{.r .cell-code  code-line-numbers=\"13,14\"}\ntxhousing |> \n  group_by(city, year) |> \n  summarize(median = mean(median, na.rm = TRUE), listings = mean(listings, na.rm = TRUE)) |> \n  ggplot(aes(x = median, y = listings, color = (city == \"Houston\"),\n             size = (city == \"Houston\"))) +\n  geom_point(alpha = 0.5, show.legend = FALSE) +\n  scale_color_manual(values = c(\"black\", \"darkred\")) +\n  scale_size_manual(values = c(2, 4)) +\n  scale_x_continuous(labels = scales::dollar, name = \"Median Price\") +\n  scale_y_continuous(labels = scales::label_number(scale_cut = scales::cut_short_scale())) +\n  theme_bw() +\n  labs(x = \"Median Price\", y = \"Avg. of Monthly Listings\",\n       subtitle = \"Houston in red\", title = \"Year: {frame_time}\") + \n  transition_time(year) \n```\n\n::: {.cell-output-display}\n![](20-anim-graphics_files/figure-revealjs/housing-anim-1.gif){fig-align='center'}\n:::\n:::\n\n\n\n\n\n---\n\n## Reminders about animation\n\nSome key points to think about before adding animation to a visualization:\n\n1. Always make and describe the original / base graphic first that does NOT include animation.\n\n. . .\n\n2. Before adding animation to the graph, ask yourself: How would animation give you additional insights about the data **that you would otherwise not be able to**?\n\n. . .\n\n3. Never add animation just because it's cool! \n\n. . .\n\n4. When presenting, make sure you explain exactly what is being displayed with animation and what within the animation you want to emphasize. This will help you determine if animation is actually worth including.\n\n---\n\n## Creating compound figures\n\nTwo different scenarios we may face:\n\n1. Creating the same type of plot many times\n\n+ e.g., using `facet_wrap()` or `facet_grid()`\n\n2. Combining several distinct plots into one cohesive display\n\n+ e.g., using flexible arrangement packages like [`cowplot`](https://cran.r-project.org/web/packages/cowplot/vignettes/introduction.html) or [`patchwork`](https://patchwork.data-imaginist.com/index.html)\n\n---\n\n## Creating the same type of plot many times\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\npenguins |>\n  ggplot(aes(x = flipper_length_mm, y = body_mass_g)) +\n  geom_point(alpha = 0.5) +\n  facet_wrap(~species) +\n  theme_light()\n```\n\n::: {.cell-output-display}\n![](20-anim-graphics_files/figure-revealjs/unnamed-chunk-4-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n\n\n\n---\n\n## Creating the same type of plot many times\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\npenguins |>\n  ggplot(aes(x = flipper_length_mm, y = body_mass_g)) +\n  geom_point(alpha = 0.5) +\n  facet_grid(island ~ species) +\n  theme_light()\n```\n\n::: {.cell-output-display}\n![](20-anim-graphics_files/figure-revealjs/unnamed-chunk-5-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n\n\n\n---\n\n## Creating a single cohesive display of multiple plots\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nplot1 <- penguins |>\n  ggplot(aes(x = flipper_length_mm, y = body_mass_g)) +\n  geom_point(alpha = 0.5)\nplot1\n```\n\n::: {.cell-output-display}\n![](20-anim-graphics_files/figure-revealjs/unnamed-chunk-6-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n\n\n\n---\n\n## Creating a single cohesive display of multiple plots\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nplot2 <- penguins |>\n  ggplot(aes(x = species, y = bill_depth_mm)) +\n  geom_violin(alpha = 0.5)\nplot2\n```\n\n::: {.cell-output-display}\n![](20-anim-graphics_files/figure-revealjs/unnamed-chunk-7-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n\n\n\n---\n\n## Using [`cowplot`](https://cran.r-project.org/web/packages/cowplot/vignettes/introduction.html) to arrange plots together\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(cowplot)\nplot_grid(plot1, plot2)\n```\n\n::: {.cell-output-display}\n![](20-anim-graphics_files/figure-revealjs/unnamed-chunk-8-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n\n\n---\n\n## Using [`cowplot`](https://cran.r-project.org/web/packages/cowplot/vignettes/introduction.html) to arrange plots together\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(cowplot)\nplot_grid(plot1, plot2, labels = c('A', 'B'), label_size = 12)\n```\n\n::: {.cell-output-display}\n![](20-anim-graphics_files/figure-revealjs/unnamed-chunk-9-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n\n\n\n---\n\n## Using [`patchwork`](https://patchwork.data-imaginist.com/index.html) to arrange plots together\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(patchwork)\nplot1 + plot2\n```\n\n::: {.cell-output-display}\n![](20-anim-graphics_files/figure-revealjs/unnamed-chunk-10-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n\n\n---\n\n## Using [`patchwork`](https://patchwork.data-imaginist.com/index.html) to arrange plots together\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nplot1 / plot2\n```\n\n::: {.cell-output-display}\n![](20-anim-graphics_files/figure-revealjs/unnamed-chunk-11-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n\n\n\n---\n\n## Using [`patchwork`](https://patchwork.data-imaginist.com/index.html) to arrange plots together\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nplot1 / plot2 + plot_annotation(tag_levels = \"A\")\n```\n\n::: {.cell-output-display}\n![](20-anim-graphics_files/figure-revealjs/unnamed-chunk-12-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n\n\n---\n\n## Using [`patchwork`](https://patchwork.data-imaginist.com/index.html) to arrange plots together\n\n\n\n\n::: {.cell layout-align=\"center\" output-location='slide'}\n\n```{.r .cell-code}\nplot3 <- penguins |>\n  ggplot(aes(x = bill_length_mm, y = bill_depth_mm,\n             color = species)) +\n  geom_point(alpha = 0.5)\nplot4 <- penguins |>\n  ggplot(aes(x = bill_length_mm, y = body_mass_g,\n             color = species)) +\n  geom_point(alpha = 0.5)\n(plot1 + plot2) / (plot3 + plot4) + plot_layout(guides = 'collect')\n```\n\n::: {.cell-output-display}\n![](20-anim-graphics_files/figure-revealjs/unnamed-chunk-13-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n\n\n\n---\n\n## Using [`patchwork`](https://patchwork.data-imaginist.com/index.html) to arrange plots together\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n(plot1 + plot2) / (plot3 + plot4) + plot_layout(guides = 'collect') +\n  plot_annotation(tag_levels = \"A\")\n```\n\n::: {.cell-output-display}\n![](20-anim-graphics_files/figure-revealjs/unnamed-chunk-14-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n\n\n---\n\n## Using [`patchwork`](https://patchwork.data-imaginist.com/index.html) to arrange plots together\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n(plot1 + plot2) / (plot3 + plot4) + plot_layout(guides = 'collect') +\n  plot_annotation(tag_levels = \"A\", title = \"A plot about penguins\",\n                  subtitle = \"With subtitle...\", caption = \"...and caption\")\n```\n\n::: {.cell-output-display}\n![](20-anim-graphics_files/figure-revealjs/unnamed-chunk-15-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n\n\n---\n\n## Infographics vs figures in papers/reports\n\n+ Infographics should standalone, thus **they must have a title along with a relevant subtitle and caption** (located within the plot)\n\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](https://clauswilke.com/dataviz/figure_titles_captions_files/figure-html/corruption-development-infographic-1.png){fig-align='center'}\n:::\n:::\n\n\n\n\n\n---\n\n## Infographics vs figures in papers/reports\n\n+ Figures in papers/reports will have captions containing the information from the standalone title/subtitle/caption, see example:\n\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![Figure 1. **Corruption and human development.** The most developed countries experience the least corruption. Data sources: Transparency International & UN Human Development Report.](https://clauswilke.com/dataviz/figure_titles_captions_files/figure-html/corruption-development-1.png){fig-align='center'}\n:::\n:::\n\n\n\n\n---\n\n## Thinking about themes...\n\n**See posted demo walking through color scales and customizing themes**\n\nDefault choices tend to treat each element with **equal weight**, e.g., axes stand out as much as the data or background elements look the same as the points of emphasis\n\n. . .\n\nYou want to design your plot with the **visual hierarchy** in mind:\n\n+ Make elements of your plot that are more important **look more important!**\n\n+ i.e., customize your plot so that the data is the focus, not the axes and grid lines!\n\n+ Match visual weight to focus of the graphic you want to communicate\n\n. . .\n\nI tend to use `theme_bw()` or `theme_light()`, but there are other options from various packages such as [`ggthemes`](https://jrnold.github.io/ggthemes/)\n\n---\n\n## Using [`patchwork`](https://patchwork.data-imaginist.com/index.html) to arrange plots together\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n(plot1 + plot2) / (plot3 + plot4) + plot_layout(guides = 'collect') +\n  plot_annotation(tag_levels = \"A\", title = \"A plot about penguins\",\n                  subtitle = \"With subtitle...\", caption = \"...and caption\") & \n  theme_minimal_grid()\n```\n\n::: {.cell-output-display}\n![](20-anim-graphics_files/figure-revealjs/unnamed-chunk-18-1.png){fig-align='center' width=768}\n:::\n:::\n\n\n\n\n---\n\n## Annotation\n\n+ Using text can be a great way to highlight and explain aspects of a visualization when **you're not there to explain it**\n\n+ [`annotate()`](https://ggplot2.tidyverse.org/reference/annotate.html) is an easy way to add text to ggplot objects or add rectangle layers for highlighting displays\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmtcars |>\n  ggplot(aes(x = wt, y = mpg)) + \n  geom_point() + \n  annotate(\"text\", x = 4, y = 25, label = \"Some text\") +\n  annotate(\"rect\", xmin = 3, xmax = 4.2, ymin = 12, ymax = 21, alpha = .2)\n```\n\n::: {.cell-output-display}\n![](20-anim-graphics_files/figure-revealjs/unnamed-chunk-19-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n\n\n---\n\n## Annotation tools\n\n+ We've discussed [`gghighlight`](https://cran.r-project.org/web/packages/gghighlight/vignettes/gghighlight.html) and [`ggrepel`](https://cran.r-project.org/web/packages/ggrepel/vignettes/ggrepel.html), but [`directlabels`](https://tdhock.github.io/directlabels/) and [`ggforce`](https://ggforce.data-imaginist.com/index.html) are also useful\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(ggforce)\nggplot(iris, aes(Petal.Length, Petal.Width)) +\n  geom_mark_rect(aes(fill = Species, label = Species)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](20-anim-graphics_files/figure-revealjs/unnamed-chunk-20-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n\n\n\n---\n\n## Saving plots and ggplot extensions\n\n+ Default function for saving the last ggplot you created is [`ggsave`](https://ggplot2.tidyverse.org/reference/ggsave.html)\n\n+ I tend to use the [`save_plot()`](https://wilkelab.org/cowplot/reference/save_plot.html) function from [`cowplot`](https://wilkelab.org/cowplot/index.html) since it has easier customization for handling panels of multiple figures\n\n+ There are a wide number of `ggplot2` extension packages for various different purposes, [you can check them out in this gallery](https://exts.ggplot2.tidyverse.org/gallery/)\n\n---\n\n## Recap and next steps\n\n+ Discussed the role of animation in visualizations\n\n+ Discussed various aspects of making high-quality graphics and relevant tools\n\n. . .\n\n+ **HW7 is due TONIGHT!**\n\n+ **ENJOY CARNIVAL!**\n\n+ Recommended reading: [`gganimate` package](https://gganimate.com/), [CW Chapter 21 Multi-panel figures](https://clauswilke.com/dataviz/multi-panel-figures.html), [CW Chapter 23 Balance the data and the context](https://clauswilke.com/dataviz/balance-data-context.html), [KH Chapter 8 Refine your plots](https://socviz.co/refineplots.html#change-the-appearance-of-plots-with-themes)\n",
    "supporting": [
      "20-anim-graphics_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}